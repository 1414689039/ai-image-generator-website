# 修改密码功能实现计划

## 1. 后端修改 (Worker)
- **文件**: `worker/src/routes/user.ts`
- **任务**: 添加 `PUT /password` 接口
  - 验证用户身份 (Auth Middleware)
  - 接收 `oldPassword` 和 `newPassword`
  - 验证 `oldPassword` 是否匹配当前用户密码
  - 计算 `newPassword` 的哈希值
  - 更新数据库中的用户密码

## 2. 前端修改 (Frontend)
- **新组件**: `frontend/src/components/ChangePasswordModal.tsx`
  - 创建模态框组件
  - 表单包含：旧密码、新密码、确认新密码
  - 前端验证（如新密码长度、两次输入是否一致）
  - 调用 API 修改密码
- **文件**: `frontend/src/components/Header.tsx`
  - 引入 `ChangePasswordModal` 组件
  - 在用户下拉菜单中添加"修改密码"按钮（放在"联系客服"下方）
  - 管理 Modal 的显示状态

## 3. 验证
- 注册/登录一个测试账号
- 尝试修改密码
- 验证旧密码输入错误的情况
- 验证修改成功后，使用旧密码无法登录，使用新密码可以登录
