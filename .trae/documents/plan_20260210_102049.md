# 管理员面板分页与密码查看功能改造计划

根据您的需求，我将对管理员面板进行以下升级，重点实现用户列表和订单列表的分页功能，并在用户列表中显示密码（哈希值）。

## 1. 后端改造 (`worker/src/routes/admin.ts`)

### 用户列表接口 (`GET /api/admin/users`)
- **当前状态**：已支持 `page` 和 `limit` 参数，但 SQL 查询未包含密码字段。
- **修改内容**：
    - 在 SQL 查询语句中增加 `password_hash` 字段，以便前端获取。
    - 示例：`SELECT id, username, email, password_hash, points...`

## 2. 前端改造 (`frontend/src/pages/Admin.tsx`)

### 状态管理
- 新增用户列表分页状态：`userPage` (当前页), `userTotal` (总条数)。
- 新增订单列表分页状态：`orderPage` (当前页), `orderTotal` (总条数)。

### 逻辑更新
- **`loadData` 函数**：
    - 调用 `/admin/users` 时传递 `page` 和 `limit=20`。
    - 调用 `/admin/orders` 时传递 `page` 和 `limit=20`。
    - 接收并更新 `total` 状态。
- **监听器**：添加 `useEffect` 监听 `userPage` 和 `orderPage` 的变化，触发数据重新加载。

### UI 界面升级
- **用户管理 Tab**：
    - **表格列增加**：新增“密码”列，显示密码哈希值（为保持界面整洁，将默认截断显示，提供“点击复制”或“悬浮查看”功能）。
    - **底部栏**：添加标准分页控件（“上一页”、“下一页”、页码/总数显示）。
- **订单查询 Tab**：
    - **底部栏**：添加标准分页控件。

## 特别说明
- **关于密码**：由于系统出于安全考虑存储的是**密码哈希 (Hash)**（这是行业标准做法），因此无法直接查看用户的明文密码。我将显示数据库中存储的哈希字符串。这可以帮助管理员验证用户是否设置了密码，或者用于对比排查问题，但不能用于直接登录用户账号。
